jQuery("body").on("click","span.close-msg",function(d){jQuery(this).parents(".acfef-message").remove()});jQuery("body").on("input",function(d){jQuery(".acfef-message").remove()});
acf.add_action("ready_field/type=relationship",function(d){d.find(".acf-button.button-primary").on("click",function(){relField=d;container=showModal(d.data("key"),d.data("form_width"));getForm(d,"add_post")});jQuery("body").find(d).on("click","a.edit-post",function(e){e.preventDefault();e.stopPropagation();relField=d;container=showModal(d.data("key"),d.data("form_width"));e=jQuery(this).parent("span.acf-rel-item").data("id");getForm(d,e)})});
jQuery(".post-slug-field input").on("input",function(){var d=this.selectionStart,e=/[`~!@#$%^&*()|+=?;:..\u2019\u201c'"<>,\u20ac\u00a3\u00a5\u2022\u060c\u066b\u061f\u00bb\u00ab\s\{\}\[\]\\\/]+/gi,a=jQuery(this).val();e.test(a)&&(jQuery(this).val(a.replace(e,"").toLowerCase()),d--);this.setSelectionRange(d,d)});
jQuery("body").on("click","button.edit-password",function(){jQuery(this).addClass("acfef-hidden").siblings(".pass-strength-result").removeClass("acfef-hidden").parents(".acf-field-password").removeClass("edit_password").addClass("editing_password").next(".acf-field-password").removeClass("edit_password");jQuery(this).after('<input type="hidden" name="edit_user_password" value="1"/>')});
jQuery("body").on("click","button.cancel-edit",function(){jQuery(this).siblings("button.edit-password").removeClass("acfef-hidden").siblings(".pass-strength-result").addClass("acfef-hidden").parents(".acf-field-password").addClass("edit_password").removeClass("editing_password").next(".acf-field-password").addClass("edit_password");jQuery(this).parents("acf-input-wrap").siblings("acf-notice");jQuery(this).siblings("input[name=edit_user_password]").remove()});
function showModal(d,e){var a=jQuery("#modal_"+d);a.length?a.removeClass("hide").addClass("show"):(a=jQuery('<div id="modal_'+d+'" class="modal edit-modal show"><div class="modal-content" style="width:'+e+'px;max-width:80%"><div class="modal-inner"><span onClick="closeModal(\''+d+'\',\'clear\')" class="acf-icon -cancel close"></span><div class="content-container"><div class="loading"><span class="acf-loading"></span></div></div></div></div></div>'),jQuery("body").append(a));return a}
function getForm(d,e){var a={action:"acfef/fields/relationship/add_form",field_key:d.data("key"),parent_form:d.parents("form").attr("id"),form_action:e};jQuery.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(a),type:"post",dataType:"html",success:showForm})}function showForm(d){container.find(".content-container").html(d);acf.do_action("append",container)}var steps=[];
jQuery("body").on("submit","form.acfef-form",function(d){d.preventDefault();$form=jQuery(this);this.blur();$form.find(".acf-spinner").css("display","block");args={form:$form,reset:!1,success:function(e){var a=jQuery('input[type="file"]:not([disabled])',e);a.each(function(b,f){0<f.files.length||jQuery(f).prop("disabled",!0)});var c=new FormData(e[0]);c.append("action","acfef/form_submit");a.prop("disabled",!1);acf.lockForm(e);jQuery.ajax({url:acf.get("ajaxurl"),type:"post",data:c,cache:!1,processData:!1,
contentType:!1,error:function(b){console.log(b)},success:function(b){if(b.success)if(b.data.redirect)window.location=b.data.redirect;else{acf.unlockForm(e);successMessage='<div class="acfef-message"><div class="acf-notice -success acf-success-message"><p class="success-msg">'+b.data.update_message+'</p><span class="acfef-dismiss close-msg acf-notice-dismiss acf-icon -cancel small"></span></div></div>';if(b.data.reload_form){var f=e.data("widget");e.replaceWith(b.data.reload_form);acf.do_action("append",
jQuery(".elementor-element-"+f))}b.data.append?(f=b.data.append,"edit"==f.action?(relField.find("div.values").find("span[data-id="+f.id+"]").html(f.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a>'),relField.find("div.choices").find("span[data-id="+f.id+"]").html(f.text)):relField.find("div.values ul").append('<li><input type="hidden" name="acf['+relField.data("key")+'][]" value="'+f.id+'" /><span data-id="'+f.id+'" class="acf-rel-item">'+f.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a></span></li>'),
e.replaceWith(successMessage),jQuery("body").find("#modal_"+b.data.field_key).delay(400).remove()):(e.find(".acf-spinner").css("display","none"),e.before(successMessage).find(".acfef-submit-button").attr("disabled",!1).removeClass("acf-hidden"),b.data.clear_form&&(jQuery("body, html").animate({scrollTop:e.offset({top:50})},2E3),f=e.data("widget"),e.replaceWith(b.data.clear_form),acf.do_action("append",jQuery(".elementor-element-"+f))))}}})}};acf.validateForm(args)});
jQuery(document).ready(function(){var d=jQuery("div[data-default]");jQuery.each(d,function(e,a){var c=jQuery(a),b=c.data("default"),f=c.data("dynamic_value"),p=c.find("input[type=text]");if(0<b.length){var h=function(l){var m=[l,"value"];~l.indexOf(":")&&(m=l.split(":"));return m},g=function(l,m){var k=c.siblings("div[data-name="+l+"]"),q=k.find("input");"radio"==k.data("type")&&(q=1==m?k.find("input"):k.find("input:selected"));"select"==k.data("type")&&(q=k.find("select"));return q},n=function(l,
m,k){var q="["+m[0]+"]";""!=k.val()&&(k=k.val(),"text"==m[1]&&(m=c.siblings("div[data-name="+m[0]+"]"),"radio"==m.data("type")&&(sourceInput=m.find(".selected").text()),"select"==m.data("type")&&(sourceInput=m.find(":selected").text()),k=sourceInput),l=l.replace(q,k));return l},r=f;jQuery.each(b,function(l,m){var k=h(m),q=g(k[0],!1);r=n(r,k,q);q=g(k[0],!0);q.on("input",function(){var t=f;jQuery.each(b,function(x,v){var u=h(v),w=g(u[0],!1);t=n(t,u,w)});p.val(t)})});p.val(r)}})});
(function(d){var e=acf.Field.extend({type:"upload_images",events:{"click .acf-gallery-add":"onClickAdd","click div.acf-gallery-upload":"onClickUpload","click .acf-gallery-edit":"onClickEdit","click .acf-gallery-remove":"onClickRemove","click .acf-gallery-attachment":"onClickSelect","click .acf-gallery-close":"onClickClose","change .acf-gallery-sort":"onChangeSort","click .acf-gallery-update":"onUpdate",mouseover:"onHover",showField:"render","input .images-preview":"imagesPreview"},actions:{validation_begin:"onValidationBegin",
validation_failure:"onValidationFailure",resize:"onResize"},onValidationBegin:function(){acf.disable(this.$sideData(),this.cid)},onValidationFailure:function(){acf.enable(this.$sideData(),this.cid)},$control:function(){return this.$(".acf-gallery")},$collection:function(){return this.$(".acf-gallery-attachments")},$attachments:function(){return this.$(".acf-gallery-attachment:not(.not-valid)")},$clone:function(){return this.$(".image-preview-clone")},$attachment:function(a){return this.$('.acf-gallery-attachment[data-id="'+
a+'"]')},$active:function(){return this.$(".acf-gallery-attachment.active")},$inValid:function(){return this.$(".acf-gallery-attachment.not-valid")},$main:function(){return this.$(".acf-gallery-main")},$side:function(){return this.$(".acf-gallery-side")},$sideData:function(){return this.$(".acf-gallery-side-data")},isFull:function(){var a=parseInt(this.get("max")),c=this.$attachments().length;return a&&c>=a},getValue:function(){var a=[];this.$attachments().each(function(){a.push(d(this).data("id"))});
return a.length?a:!1},addUnscopedEvents:function(a){this.on("change",".acf-gallery-side",function(c){a.onUpdate(c,d(this))})},addSortable:function(a){this.$collection().sortable({items:".acf-gallery-attachment",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(c,b){b.placeholder.html(b.item.html());b.placeholder.removeAttr("style")},update:function(c,b){a.$input().trigger("change")}});this.$control().resizable({handles:"s",minHeight:200,stop:function(c,b){acf.update_user_setting("gallery_height",
b.size.height)}})},initialize:function(){this.addUnscopedEvents(this);this.render()},render:function(){var a=this.$(".acf-gallery-sort"),c=this.$(".acf-gallery-add"),b=this.$attachments().length;this.isFull()?c.addClass("disabled"):c.removeClass("disabled");b?a.removeClass("disabled"):a.addClass("disabled");this.resize()},resize:function(){var a=this.$control().width();a=Math.round(a/150);a=Math.min(a,8);this.$control().attr("data-columns",a)},onResize:function(){this.resize()},openSidebar:function(){this.$control().addClass("-open");
var a=this.$control().width()/3;a=parseInt(a);a=Math.max(a,350);this.$(".acf-gallery-side-inner").css({width:a-1});this.$side().animate({width:a-1},250);this.$main().animate({right:a},250)},closeSidebar:function(){this.$control().removeClass("-open");this.$active().removeClass("active");acf.disable(this.$side());var a=this.$(".acf-gallery-side-data");this.$main().animate({right:0},250);this.$side().animate({width:0},250,function(){a.html("")})},onClickAdd:function(a,c){this.$control().css("height",
"400");this.isFull()?this.showNotice({text:acf.__("Maximum selection reached"),type:"warning"}):acf.newMediaPopup({mode:"select",title:acf.__("Add Image to Gallery"),field:this.get("key"),multiple:"add",library:this.get("library"),allowedTypes:this.get("mime_types"),selected:this.val(),select:d.proxy(function(b,f){this.appendAttachment(b,f)},this)})},imagesPreview:function(a,c){var b=this;this.$control().css("height","400");var f=this.$attachments().length,p=this.$control().data("max"),h=a.currentTarget.files;
Object.keys(h).forEach(function(g){if(0<p&&f>=p)return!1;var n=h[g],r=new FileReader;r.onload=function(l){l=b.$clone().clone();l.removeClass("acf-hidden image-preview-clone").addClass("acf-gallery-attachment acf-uploading").find("img").attr("src",r.result);l.appendTo(b.$collection());b.uploadImage(n,l)};f++;r.readAsDataURL(a.target.files[g])});f>=p&&0<p&&this.$("input.images-preview").prop("disabled",!0)},uploadImage:function(a,c){var b=c.find(".uploads-progress .percent"),f=c.find(".uploads-progress .bar");
b.text("33%");f.css("width","33%");var p=this.$el.parents("form").find("input[name=_acf_nonce]").val(),h=this.get("key"),g=new FormData;g.append("action","acf/fields/upload_images/add_attachment");g.append("file",a);g.append("field_key",h);g.append("nonce",p);d.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(g),type:"post",processData:!1,contentType:!1,cache:!1}).done(function(n){n.success?(b.text("100%"),f.css("width","100%"),c.attr("data-id",n.data.id).find(".acf-gallery-remove").attr("data-id",
n.data.id),n=d("<input>").attr({type:"hidden",name:"acf["+h+"][]",value:n.data.id}),c.prepend(n).removeClass("acf-uploading"),setTimeout(function(){c.find(".uploads-progress").remove()},5E3)):(c.find(".uploads-progress").remove(),c.addClass("not-valid").append('<p class="errors">'+n.data+"</p>").find(".margin").append('<p class="upload-fail">x</p>'))})},onClickUpload:function(a,c){this.isFull()?this.showNotice({text:acf.__("Maximum selection reached: "+this.$control().data("max")),type:"warning"}):
this.$inValid().remove()},appendAttachment:function(a,c){a=this.validateAttachment(a);if(!this.isFull()&&!this.$attachment(a.id).length){var b=['<div class="acf-gallery-attachment" data-id="'+a.id+'">','<input type="hidden" value="'+a.id+'" name="'+this.getInputName()+'[]">','<div class="margin" title=""><div class="thumbnail"><img src="" alt=""></div><div class="filename"></div></div><div class="actions">','<a href="#" class="acf-icon -cancel dark acf-gallery-remove" data-id="'+a.id+'"></a>',"</div></div>"].join("");
b=d(b);this.$collection().append(b);if("prepend"===this.get("insert")){var f=this.$attachments().eq(c);f.length&&f.before(b)}this.renderAttachment(a);this.render();this.$input().trigger("change")}},validateAttachment:function(a){a=acf.parseArgs(a,{id:"",url:"",alt:"",title:"",filename:"",type:"image"});if(a.attributes){a=a.attributes;var c=acf.isget(a,"sizes",this.get("preview_size"),"url");null!==c&&(a.url=c)}return a},renderAttachment:function(a){a=this.validateAttachment(a);var c=this.$attachment(a.id);
if("image"==a.type)c.find(".filename").remove();else{var b=acf.isget(a,"image","src");null!==b&&(a.url=b);c.find(".filename").text(a.filename)}a.url||(a.url=acf.get("mimeTypeIcon"),c.addClass("-icon"));c.find("img").attr({src:a.url,alt:a.alt,title:a.title});acf.val(c.find("input"),a.id)},editAttachment:function(a){acf.newMediaPopup({mode:"edit",title:acf.__("Edit Image"),button:acf.__("Update Image"),attachment:a,field:this.get("key"),select:d.proxy(function(c,b){this.renderAttachment(c)},this)})},
onClickEdit:function(a,c){var b=c.data("id");b&&this.editAttachment(b)},removeAttachment:function(a){this.closeSidebar();this.$attachment(a).remove();this.render();this.$input().trigger("change")},onClickRemove:function(a,c){a.preventDefault();a.stopPropagation();var b=c.data("id");b?this.removeAttachment(b):c.parents(".acf-gallery-attachment").remove();b=this.$attachments().length;var f=this.$control().data("max");b<f&&this.$("input.images-preview").prop("disabled",!1)},selectAttachment:function(a){var c=
this.$attachment(a);if(!c.hasClass("active")){var b=this.proxy(function(){this.$side().find(":focus").trigger("blur");this.$active().removeClass("active");c.addClass("active");this.openSidebar();f()}),f=this.proxy(function(){var h={action:"acf/fields/gallery/get_attachment",field_key:this.get("key"),id:a};this.has("xhr")&&this.get("xhr").abort();acf.showLoading(this.$sideData());h=d.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(h),type:"post",dataType:"html",cache:!1,success:p});this.set("xhr",
h)}),p=this.proxy(function(h){if(h){var g=this.$sideData();g.html(h);g.find(".compat-field-acf-form-data").remove();g.find("> table.form-table > tbody").append(g.find("> .compat-attachment-fields > tbody > tr"));acf.doAction("append",g)}});b()}},onClickSelect:function(a,c){var b=c.data("id");b&&this.selectAttachment(b)},onClickClose:function(a,c){this.closeSidebar()},onChangeSort:function(a,c){if(!c.hasClass("disabled")){var b=c.val();if(b){var f=[];this.$attachments().each(function(){f.push(d(this).data("id"))});
var p=this.proxy(function(){var g={action:"acf/fields/gallery/get_sort_order",field_key:this.get("key"),ids:f,sort:b};d.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"post",cache:!1,data:acf.prepareForAjax(g),success:h})}),h=this.proxy(function(g){acf.isAjaxSuccess(g)&&(g.data.reverse(),g.data.map(function(n){this.$collection().prepend(this.$attachment(n))},this))});p()}}},onUpdate:function(a,c){var b=this.$(".acf-gallery-update");if(!b.hasClass("disabled")){var f=acf.serialize(this.$sideData());
b.addClass("disabled");b.before('<i class="acf-loading"></i> ');f.action="acf/fields/gallery/update_attachment";d.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(f),type:"post",dataType:"json",complete:function(){b.removeClass("disabled");b.prev(".acf-loading").remove()}})}},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(e);acf.registerConditionForFieldType("hasValue","gallery");acf.registerConditionForFieldType("hasNoValue","gallery");acf.registerConditionForFieldType("selectionLessThan",
"gallery");acf.registerConditionForFieldType("selectionGreaterThan","gallery")})(jQuery);jQuery("body").on("input","input.image-preview",function(d){var e=new FileReader,a=jQuery(this);e.onload=function(){a.parents(".hide-if-value").addClass("acfef-hidden").siblings(".show-if-value").addClass("show").find("img").attr("src",e.result)};imagePreview=!0;e.readAsDataURL(d.target.files[0])});jQuery("body").on("click","a[data-name=remove]",function(d){jQuery(this).parents(".show-if-value").removeClass("show").siblings(".hide-if-value").removeClass("acfef-hidden").find("input.image-preview").val("")});
(function(d,e){var a=acf.models.ImageField.extend({type:"upload_image"});acf.registerFieldType(a)})(jQuery);
jQuery("body").on("click",".acfef-prev-button",function(d){var e=jQuery(this).parents("form"),a=e.data("widget");d={action:"acfef/forms/multi_step/change_step",form_data:e.find("input[name=_acf_form]").val()};jQuery.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(d),type:"post",dataType:"json",cache:!1,success:function(c){c.data.reload_form&&(e.replaceWith(c.data.reload_form),acf.do_action("append",jQuery(".elementor-element-"+a)))}})});
jQuery("body").on("click",".change-step",function(d){var e=jQuery(this).parents("form"),a=e.data("widget");d={action:"acfef/forms/multi_step/change_step",form_data:e.find("input[name=_acf_form]").val(),step:jQuery(this).data("step")};jQuery.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(d),type:"post",dataType:"json",cache:!1,success:function(c){c.data.reload_form&&(e.replaceWith(c.data.reload_form),acf.do_action("append",jQuery(".elementor-element-"+a)))}})});
jQuery(document).on("elementor/popup/show",function(d,e,a){acf.do_action("append",jQuery("#elementor-popup-modal-"+e))});jQuery(".acfef-draft-button").click(function(d){window.acf.validation.active=!1});